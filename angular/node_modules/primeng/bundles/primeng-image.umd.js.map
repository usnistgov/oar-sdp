{"version":3,"file":"primeng-image.umd.js","sources":["../../src/app/components/image/image.ts","../../src/app/components/image/primeng-image.ts"],"sourcesContent":["import { NgModule, Component, Input, ElementRef, ContentChild, ChangeDetectionStrategy, ViewEncapsulation, TemplateRef, AfterContentInit, ContentChildren, QueryList, Output, EventEmitter, ChangeDetectorRef, ViewChild } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SharedModule, PrimeTemplate, PrimeNGConfig } from 'primeng/api';\nimport {trigger,style,transition,animate, AnimationEvent,} from '@angular/animations';\nimport { DomHandler } from 'primeng/dom';\nimport { ZIndexUtils } from 'primeng/utils';\n\n@Component({\n    selector: 'p-image',\n    template: `\n        <span [ngClass]=\"containerClass()\" [class]=\"styleClass\" [ngStyle]=\"style\">\n            <img [attr.src]=\"src\" [attr.alt]=\"alt\" [attr.width]=\"width\" [attr.height]=\"height\" [ngStyle]=\"imageStyle\" [class]=\"imageClass\" />\n            <div class=\"p-image-preview-indicator\" *ngIf=\"preview\" (click)=\"onImageClick()\">\n                <ng-container *ngIf=\"indicatorTemplate;else defaultTemplate\">\n                    <ng-container *ngTemplateOutlet=\"indicatorTemplate\"></ng-container>\n                </ng-container>\n                <ng-template #defaultTemplate>\n                    <i class=\"p-image-preview-icon pi pi-eye\"></i>\n                </ng-template>\n            </div>\n            <div #mask class=\"p-image-mask p-component-overlay p-component-overlay-enter\" *ngIf=\"maskVisible\" (click)=\"onMaskClick()\">\n                <div class=\"p-image-toolbar\">\n                    <button class=\"p-image-action p-link\" (click)=\"rotateRight()\" type=\"button\">\n                        <i class=\"pi pi-refresh\"></i>\n                    </button>\n                    <button class=\"p-image-action p-link\" (click)=\"rotateLeft()\" type=\"button\">\n                        <i class=\"pi pi-undo\"></i>\n                    </button>\n                    <button class=\"p-image-action p-link\" (click)=\"zoomOut()\" type=\"button\" [disabled]=\"zoomDisabled()\">\n                        <i class=\"pi pi-search-minus\"></i>\n                    </button>\n                    <button class=\"p-image-action p-link\" (click)=\"zoomIn()\" type=\"button\" [disabled]=\"zoomDisabled()\">\n                        <i class=\"pi pi-search-plus\"></i>\n                    </button>\n                    <button class=\"p-image-action p-link\" type=\"button\">\n                        <i class=\"pi pi-times\"></i>\n                    </button>\n                </div>\n                <div *ngIf=\"previewVisible\" [@animation]=\"{value: 'visible', params: {showTransitionParams: showTransitionOptions, hideTransitionParams: hideTransitionOptions}}\"\n                    (@animation.start)=\"onAnimationStart($event)\" (@animation.done)=\"onAnimationEnd($event)\">\n                    <img [attr.src]=\"src\" class=\"p-image-preview\" [ngStyle]=\"imagePreviewStyle()\" (click)=\"onPreviewImageClick()\"/>\n                </div>\n            </div>\n        </span>\n    `,\n    animations: [\n        trigger('animation', [\n            transition('void => visible', [\n                style({ transform: 'scale(0.7)', opacity: 0 }),\n                animate('{{showTransitionParams}}')\n            ]),\n            transition('visible => void', [\n                animate('{{hideTransitionParams}}', style({ transform: 'scale(0.7)', opacity: 0 }))\n            ])\n        ])\n    ],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    encapsulation: ViewEncapsulation.None,\n    styleUrls: ['./image.css'],\n    host: {\n        'class': 'p-element'\n    }\n})\nexport class Image implements AfterContentInit {\n\n    @Input() imageClass: string;\n\n    @Input() imageStyle: any;\n\n    @Input() styleClass: string;\n\n    @Input() style: any;\n\n    @Input() src: string;\n\n    @Input() alt: string;\n\n    @Input() width: string;\n\n    @Input() height: string;\n\n    @Input() appendTo: any;\n\n    @Input() preview: boolean = false;\n\n    @Input() showTransitionOptions: string = '150ms cubic-bezier(0, 0, 0.2, 1)';\n\n    @Input() hideTransitionOptions: string = '150ms cubic-bezier(0, 0, 0.2, 1)';\n\n    @Output() onShow: EventEmitter<any> = new EventEmitter();\n\n    @Output() onHide: EventEmitter<any> = new EventEmitter();\n\n    @ViewChild('mask') mask: ElementRef;\n\n    @ContentChildren(PrimeTemplate) templates: QueryList<any>;\n\n    indicatorTemplate: TemplateRef<any>;\n\n    maskVisible: boolean = false;\n\n    previewVisible: boolean =  false;\n\n    rotate: number = 0;\n\n    scale: number = 1;\n\n    previewClick: boolean = false;\n\n    container: HTMLElement;\n\n    wrapper: HTMLElement;\n\n    constructor(private config: PrimeNGConfig, private cd: ChangeDetectorRef) { }\n\n    ngAfterContentInit() {\n        this.templates.forEach((item) => {\n            switch(item.getType()) {\n                case 'indicator':\n                    this.indicatorTemplate = item.template;\n                break;\n\n                default:\n                    this.indicatorTemplate = item.template;\n                break;\n            }\n        });\n    }\n\n    onImageClick() {\n        if (this.preview) {\n            this.maskVisible = true;\n            this.previewVisible = true;\n        }\n    }\n\n    onMaskClick() {\n        if (!this.previewClick) {\n            this.previewVisible = false;\n            this.rotate = 0;\n            this.scale = 1;\n        }\n\n        this.previewClick = false;\n    }\n\n    onPreviewImageClick() {\n        this.previewClick = true;\n    }\n\n    rotateRight() {\n        this.rotate += 90;\n        this.previewClick = true;\n    }\n\n    rotateLeft() {\n        this.rotate -= 90;\n        this.previewClick = true;\n    }\n\n    zoomIn() {\n        this.scale = this.scale + 0.1;\n        this.previewClick = true;\n    }\n\n    zoomOut() {\n        this.scale = this.scale - 0.1;\n        this.previewClick = true;\n    }\n\n    zoomDisabled() {\n        return this.scale <= 0.5 || this.scale >= 1.5;\n    }\n\n    onAnimationStart(event: AnimationEvent) {\n        switch(event.toState) {\n            case 'visible':\n                this.container = event.element;\n                this.wrapper = this.container.parentElement;\n                this.appendContainer();\n                this.moveOnTop();\n            break;\n\n            case 'void':\n                DomHandler.addClass(this.wrapper, 'p-component-overlay-leave');\n            break;\n        }\n    }\n\n    onAnimationEnd(event: AnimationEvent) {\n        switch(event.toState) {\n            case 'void':\n                ZIndexUtils.clear(this.container);\n                this.maskVisible = false;\n                this.container = null;\n                this.wrapper = null;\n                this.cd.markForCheck();\n                this.onHide.emit({});\n            break;\n            case 'visible':\n                this.onShow.emit({});\n            break;\n        }\n    }\n\n    moveOnTop() {\n        ZIndexUtils.set('modal', this.container, this.config.zIndex.modal);\n        this.wrapper.style.zIndex = String(parseInt(this.container.style.zIndex, 10) - 1);\n    }\n\n    appendContainer() {\n        if (this.appendTo) {\n            if (this.appendTo === 'body')\n                document.body.appendChild(this.wrapper);\n            else\n                DomHandler.appendChild(this.wrapper, this.appendTo);\n        }\n    }\n\n    imagePreviewStyle() {\n        return {transform: 'rotate(' + this.rotate + 'deg) scale(' + this.scale + ')'};\n    }\n\n    containerClass() {\n        return {\n            'p-image p-component': true,\n            'p-image-preview-container': this.preview\n        };\n    }\n}\n\n@NgModule({\n    imports: [CommonModule],\n    exports: [Image, SharedModule],\n    declarations: [Image]\n})\nexport class ImageModule { }\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["EventEmitter","DomHandler","ZIndexUtils","PrimeTemplate","trigger","transition","style","animate","Component","ChangeDetectionStrategy","ViewEncapsulation","Input","Output","ViewChild","ContentChildren","CommonModule","SharedModule","NgModule"],"mappings":"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"}